{"version":3,"sources":["../lib/SimpleBus.ts"],"names":["SimpleBus","Map","getVersion","packageJson","version","subscribe","name","handler","handlers","set","get","concat","unsubscribe","filter","h","emit","event","forEach","e","console","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKO,MAAMA,SAAN,CAAoC;AAAA;AAAA,sCAEpB,IAAIC,GAAJ,EAFoB;AAAA;;AAIvCC,EAAAA,UAAU,GAAW;AACjB,WAAOC,WAAW,CAACC,OAAnB;AACH;;AAEDC,EAAAA,SAAS,CAACC,IAAD,EAAeC,OAAf,EAA4C;AACjD,SAAKC,QAAL,CAAcC,GAAd,CAAkBH,IAAlB,EAAwB,CAAC,KAAKE,QAAL,CAAcE,GAAd,CAAkBJ,IAAlB,KAA2B,EAA5B,EAAgCK,MAAhC,CAAuCJ,OAAvC,CAAxB;AACH;;AAEDK,EAAAA,WAAW,CAACN,IAAD,EAAeC,OAAf,EAA4C;AACnD,SAAKC,QAAL,CAAcC,GAAd,CAAkBH,IAAlB,EAAwB,CAAC,KAAKE,QAAL,CAAcE,GAAd,CAAkBJ,IAAlB,KAA2B,EAA5B,EAAgCO,MAAhC,CAAuCC,CAAC,IAAIA,CAAC,IAAIP,OAAjD,CAAxB;AACH;;AAEDQ,EAAAA,IAAI,CAACT,IAAD,EAAeU,KAAf,EAAmC;AACnC,KAAC,KAAKR,QAAL,CAAcE,GAAd,CAAkBJ,IAAlB,KAA2B,EAA5B,EAAgCW,OAAhC,CAAwCH,CAAC,IAAI;AACzC,UAAI;AACAA,QAAAA,CAAC,CAACE,KAAD,CAAD;AACH,OAFD,CAEE,OAAOE,CAAP,EAAU;AACRC,QAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd,EAAiDF,CAAjD;AACH;AACJ,KAND;AAOH;;AAxBsC","sourcesContent":["import packageJson from \"../package.json\";\nimport { Event } from \"./Event.js\";\nimport { EventBus } from \"./EventBus.js\";\nimport { EventHandler } from \"./EventHandler.js\";\n\nexport class SimpleBus implements EventBus {\n\n    private handlers = new Map<string, EventHandler[]>();\n\n    getVersion(): string {\n        return packageJson.version\n    }\n\n    subscribe(name: string, handler: EventHandler): void {\n        this.handlers.set(name, (this.handlers.get(name) || []).concat(handler));\n    }\n\n    unsubscribe(name: string, handler: EventHandler): void {\n        this.handlers.set(name, (this.handlers.get(name) || []).filter(h => h != handler));\n    }\n\n    emit(name: string, event: Event): void {\n        (this.handlers.get(name) || []).forEach(h => {\n            try {\n                h(event)\n            } catch (e) {\n                console.error('could not invoke event listener', e)\n            }\n        })\n    }\n\n}\n"],"file":"SimpleBus.js"}